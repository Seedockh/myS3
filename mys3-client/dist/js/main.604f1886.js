(function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={main:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push(["a949","chunk-vendors"]),n()})({"034f":function(e,t,n){"use strict";n.r(t);var r=n("85ec"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"15a8":function(e,t,n){"use strict";n.r(t);var r=n("afee"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"1e8f":function(e,t,n){e.exports=n.p+"img/delete-icon.5dd65911.png"},2209:function(e,t,n){"use strict";n.r(t);var r=n("2361"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},2361:function(e,t,n){},"42f5":function(e,t){e.exports="data:image/png;base64,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"},"509f":function(e,t,n){"use strict";n.r(t);var r=n("b0d1"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},5607:function(e,t,n){},5678:function(e,t,n){},"85ec":function(e,t,n){},"88eb":function(e,t,n){e.exports=n.p+"img/upload-icon.5ac9854c.png"},a43e:function(e,t,n){"use strict";n.r(t);var r=n("5607"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},a949:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=n("8c4f"),i=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3"));function o(e){var t=e.next,n=e.router;return localStorage.getItem("token")?t():n.push({name:"login"})}var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"home-container"}},[n("LeftPanel",{attrs:{result:this.user}}),n("FileList",{attrs:{result:this.user}})],1)},c=[],u=n("bc3a"),l=n.n(u),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"leftpanel-container"}},[r("p",{staticClass:"leftpanel-title",on:{click:e.updateUser}},[e._v(e._s(this.result.nickname))]),r("ul",{staticClass:"userid"},[r("li",{on:{click:e.getBuckets}},[r("img",{attrs:{src:n("e7fb"),alt:"folder picture"}}),e._v(" "+e._s(this.result.id)+" ")])]),e.depth>=1?r("ul",{staticClass:"buckets-list"},e._l(e.currentFolders,(function(t,a){return r("li",{key:t,class:{selected:a===e.selectedIndex},on:{click:function(n){return e.handleChangeBucket(t,a)}}},[r("img",{attrs:{src:n("e7fb"),alt:"folder picture"}}),r("span",{on:{click:e.getBlobs}},[e._v(e._s(t))]),r("img",{staticClass:"delete-icon",attrs:{src:n("1e8f"),alt:"folder picture"},on:{click:e.deleteBucket}})])})),0):e._e(),r("button",{staticClass:"btn-submit",attrs:{type:"button",name:"logout"},on:{click:e.destroyToken}},[e._v("Logout")])])},f=[],p=(n("c975"),n("a434"),n("b0c0"),n("ac1f"),n("5319"),n("498a"),n("53ca")),h=(n("96cf"),n("1da1")),m=n("afc2"),g=n.n(m),k=n("1940"),v=n.n(k),b={methods:{getToken:function(){var e=this;return l.a.post("http://localhost:1337/checktoken",g.a.stringify({token:localStorage.token}),{"Content-Type":"application/x-www-form-urlencoded"}).then((function(t){if(t.data.valid)return localStorage.token;e.destroyToken()})).catch((function(){return e.destroyToken()}))},createToken:function(e){localStorage.token=e,ne.push({name:"home"})},destroyToken:function(){localStorage.removeItem("token"),"login"!==ne.history.current.name&&ne.push({name:"login"})}}},w={name:"LeftPanel",mixins:[b],props:["result"],data:function(){return{token:null,depth:0,currentFolders:[],editBucket:!1,selectedIndex:null,selectedBucket:null}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,this.$root.$on("sendDataToLeftPanelComponent",(function(e){if(t.editBucket=!1,e.new)return t.getBuckets();t.getBlobs(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{updateUser:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v()({title:"Edit your account",html:'<input id="swal-input1" class="swal2-input"><input id="swal-input2" class="swal2-input">'}).then((function(e){t.renameBucket(e),t.editBucket=!1}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),handleChangeBucket:function(e,t){this.selectedIndex===t&&this.selectedBucket===e?this.editBucket=!0:this.editBucket=!1,this.selectedIndex=t,this.selectedBucket=e},getBuckets:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:if(this.token=e.sent,0===this.depth&&l.a.get("http://localhost:1337/user/getBuckets",{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(e){return t.depth++,t.$root.$emit("sendDataToFileListComponent",{list:null,userId:t.result.id,bucketName:null}),t.currentFolders=e.data.list})).catch((function(e){v()(e.response.data.message,{icon:"error"})})),1!==this.depth||null!==this.selectedIndex){e.next=9;break}return this.depth--,this.editBucket=!1,this.$root.$emit("sendDataToFileListComponent",{list:null,userId:null,bucketName:null}),e.abrupt("return",this.currentFolders=[]);case 9:if(!(1===this.depth&&this.selectedIndex>=0)){e.next=13;break}return this.selectedIndex=null,this.editBucket=!1,e.abrupt("return",this.$root.$emit("sendDataToFileListComponent",{list:null,userId:this.result.id,bucketName:null}));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),renameBucket:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:if(this.token=e.sent,""!==t&&t){e.next=5;break}return e.abrupt("return");case 5:t=t.replace(/ /g,"-"),this.currentFolders[this.currentFolders.indexOf(this.selectedBucket)]=t,n=this.currentFolders[this.currentFolders.indexOf(this.selectedBucket)],this.getBuckets(),l.a.put("http://localhost:1337/bucket/edit/".concat(this.selectedBucket),g.a.stringify({name:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(this.token)}}).then((function(e){e.data.name!==n?v()("Bucket successfully renamed to ".concat(e.data.name," !"),{icon:"success"}):(v()("Bucket successfully renamed, but to ".concat(e.data.name," !"),{icon:"warning"}),r.getBuckets())})).catch((function(e){v()(e.response.data,{icon:"error"})}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteBucket:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,v()("Are you sure you want to delete this bucket ?",{dangerMode:!0,buttons:!0}).then((function(e){if(e){var n=t.currentFolders;t.currentFolders.splice(t.currentFolders.indexOf(t.selectedBucket),1),t.getBuckets(),l.a.delete("http://localhost:1337/bucket/delete/".concat(t.selectedBucket),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(){v()("Bucket deleted successfully !",{icon:"success"})})).catch((function(e){return t.currentFolders=n,t.getBuckets(),v()(e.response.data.message,{icon:"warning"})}))}}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBlobs:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,"object"===Object(p["a"])(t)&&(t=t.toElement.innerText.trim()),this.editBucket?this.editBucket&&v()("Rename your bucket :",{content:{element:"input",attributes:{value:t,placeholder:"Rename your bucket",type:"text"}}}).then((function(e){n.renameBucket(e),n.editBucket=!1})):(this.editBucket=!0,l.a.get("http://localhost:1337/bucket/listFiles/".concat(t),{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(e){return n.$root.$emit("sendDataToFileListComponent",{list:e.data,userId:n.result.id,bucketName:t})})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},A=w,y=n("2877");function C(e){var t=n("509f");t.__inject__&&t.__inject__(e)}var B=Object(y["a"])(A,d,f,!1,C,"78e0f82a","29b1e262"),x=B.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"filelist-container"}},[e.list&&e.list.files&&e.list.files.length>0?r("div",{staticClass:"list-section"},e._l(e.list.blobs,(function(t){return r("div",{key:t.id,staticClass:"list-line"},[r("div",{staticClass:"list-item",on:{click:function(n){return e.shareFile(t.id)}}},[r("p",{staticClass:"item-detail"},[e._v(e._s(t.name))]),r("p",{staticClass:"item-detail"},[e._v(e._s(t.size/1e3)+"kB")])]),r("div",{staticClass:"list-buttons"},[r("button",{staticClass:"download-blob",attrs:{type:"button",name:"download-blob"},on:{click:function(n){return e.downloadFile(t.id)}}},[e._v("DOWNLOAD")]),r("button",{staticClass:"duplicate-blob",attrs:{type:"button",name:"duplicate-blob"},on:{click:function(n){return e.duplicateFile(t.id)}}},[e._v("DUPLICATE")]),r("button",{staticClass:"delete-blob",attrs:{type:"button",name:"delete-blob"},on:{click:function(n){return e.deleteFile(t.id)}}},[e._v("DELETE")])])])})),0):e.list&&e.list.files&&0===e.list.files.length?r("div",{staticClass:"list-section"},[r("p",{staticClass:"list-information"},[e._v('Bucket "'+e._s(e.selectedBucket)+'" is empty.')])]):e.userId?r("div",{staticClass:"list-section"},[r("p",{staticClass:"list-information"},[e._v("Please click on a bucket's name to list files.")])]):r("div",{staticClass:"list-section"},[r("p",{staticClass:"list-information"},[e._v("Please click on your account folder.")])]),e.selectedBucket?r("div",{staticClass:"upload-blob-form"},[r("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:"mys3-upload"},on:{change:e.handleFile}}),r("button",{staticClass:"btn-submit",attrs:{name:"btn-mys3-upload"},on:{click:e.uploadFile}},[r("img",{attrs:{src:n("88eb"),alt:"add file"}}),e._v(" Upload a file ")])]):e._e(),e.userId&&!e.selectedBucket?r("div",{staticClass:"create-bucket-form"},[r("input",{ref:"newBucket",attrs:{type:"text",placeholder:"Enter bucket name here...",name:"newBucket"},on:{change:e.handleNewBucket}}),r("button",{staticClass:"create-bucket",on:{click:e.createBucket}},[r("img",{attrs:{src:n("42f5"),alt:"add bucket"}}),e._v(" Create a new bucket ")])]):e._e()])},j=[],T=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),{name:"FileList",mixins:[b],data:function(){return{list:null,userId:null,selectedBucket:null,file:null,newBucket:""}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,this.$root.$on("sendDataToFileListComponent",(function(e){t.list=e.list,t.userId=e.userId,t.selectedBucket=e.bucketName}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleNewBucket:function(){this.newBucket=this.$refs.newBucket.value},shareFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,l.a.get("http://localhost:1337/blob/retrieve/".concat(t),{headers:{Authorization:"Bearer ".concat(this.token)},responseType:"arraybuffer"}).then((function(e){l.a.get("http://localhost:1337/blob/getInfos/".concat(t),{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(t){var n=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",t.data.name),document.body.appendChild(r);var a=document.createElement("a");a.href=r,a.innerHTML="".concat(t.data.name),v()({title:"Share link :",content:a})})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}))})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createBucket:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:if(this.token=e.sent,this.newBucket){e.next=5;break}return e.abrupt("return",v()("No name specified !",{icon:"warning"}));case 5:this.newBucket=this.newBucket.replace(/ /g,"-"),this.$root.$emit("sendDataToLeftPanelComponent",{new:this.newBucket}),l.a.post("http://localhost:1337/bucket/createNew",g.a.stringify({name:this.newBucket}),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(this.token)}}).then((function(){v()("Bucket ".concat(t.newBucket," created successfully !"),{icon:"success"})})).catch((function(e){return/duplicate key value violates unique constraint/g.test(e.response.data.message)?v()("Bucket with this name already exists !",{icon:"warning"}):v()(e.response.data.message,{icon:"warning"})}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFile:function(){this.file=this.$refs.file.files[0]},uploadFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:if(this.token=e.sent,this.file){e.next=5;break}return e.abrupt("return",v()("No file selected !",{icon:"warning"}));case 5:t=new FormData,t.append("mys3-upload",this.file),l.a.post("http://localhost:1337/blob/add/".concat(this.selectedBucket),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(this.token)}}).then((function(e){v()("File ".concat(e.data.name," uploaded successfully !"),{icon:"success"}),n.$root.$emit("sendDataToLeftPanelComponent",n.selectedBucket)})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,l.a.get("http://localhost:1337/blob/retrieve/".concat(t),{headers:{Authorization:"Bearer ".concat(this.token)},responseType:"arraybuffer"}).then((function(e){l.a.get("http://localhost:1337/blob/getInfos/".concat(t),{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(t){var n=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",t.data.name),document.body.appendChild(r),r.click()})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}))})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),duplicateFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,l.a.post("http://localhost:1337/blob/duplicate/".concat(t),{},{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(e){v()("File ".concat(e.data.name," successfully created !"),{icon:"success"}),n.$root.$emit("sendDataToLeftPanelComponent",n.selectedBucket)})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:this.token=e.sent,v()("Are you sure you want to delete this file ?",{dangerMode:!0,buttons:!0}).then((function(e){e&&l.a.delete("http://localhost:1337/blob/delete/".concat(t),{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(){v()("File deleted successfully !",{icon:"success"}),n.$root.$emit("sendDataToLeftPanelComponent",n.selectedBucket)})).catch((function(e){return v()(e.response.data.message,{icon:"warning"})}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}),O=T;function R(e){var t=n("d249");t.__inject__&&t.__inject__(e)}var E=Object(y["a"])(O,_,j,!1,R,"69e57816","646fc7b6"),F=E.exports,P={name:"Home",components:{LeftPanel:x,FileList:F},data:function(){return{user:{id:null,nickname:null,email:null}}},mounted:function(){var e=this;l.a.get("http://localhost:1337/user/get",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){e.user={id:t.data.id,nickname:t.data.nickname,email:t.data.email}})).catch((function(){return e.$router.push({name:"login"})}))}},D=P;function I(e){var t=n("2209");t.__inject__&&t.__inject__(e)}var L=Object(y["a"])(D,s,c,!1,I,"72342f2e","23d704de"),N=L.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login-container"}},[n("div",{staticClass:"login-form"},[n("h3",[e._v("Login")]),n("label",[e._v("Nickname")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],attrs:{type:"text",name:"nickname"},domProps:{value:e.nickname},on:{input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),n("label",[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.error?n("p",{staticClass:"errorMessage"},[e._v(e._s(e.error))]):e._e(),n("input",{staticClass:"btn-submit",attrs:{type:"submit",name:"btn-mys3-login",value:"Login"},on:{click:function(t){return e.login()}}}),n("a",{attrs:{href:""},on:{click:e.goToRegister}},[e._v("Create account")])])])},S=[],J={name:"Login",mixins:[b],props:{reloadToken:{type:Function}},data:function(){return{nickname:"",password:"",error:void 0}},methods:{login:function(){var e=this;this.error=void 0,l.a.post("http://localhost:1337/auth/login",g.a.stringify({nickname:this.nickname,password:this.password}),{"Content-Type":"application/x-www-form-urlencoded"}).then((function(t){e.createToken(t.data.token)})).catch((function(t){e.error=t.response.data.message}))},goToRegister:function(e){return e.preventDefault,this.$router.push({name:"register"})}}},Y=J;function K(e){var t=n("a43e");t.__inject__&&t.__inject__(e)}var M=Object(y["a"])(Y,z,S,!1,K,"705a2586","4506a352"),Z=M.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"register-container"}},[n("h3",[e._v("REGISTER")]),n("div",{staticClass:"register-form"},[n("label",[e._v("Nickname")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],attrs:{type:"text",name:"nickname",required:""},domProps:{value:e.nickname},on:{input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),n("label",[e._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("label",[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.error?n("p",{staticClass:"errorMessage"},[e._v(e._s(e.error))]):e._e(),n("input",{staticClass:"btn-submit",attrs:{type:"submit",name:"btn-mys3-register",value:"Register"},on:{click:function(t){return e.register()}}}),n("a",{attrs:{href:""},on:{click:e.goToLogin}},[e._v("Login")])])])},V=[],X={name:"Register",data:function(){return{nickname:"",email:"",password:"",error:null}},methods:{register:function(){var e=this;return this.error=null,this.nickname.length<=2?this.error="Nickname must be at least 3 characters long":this.email.length<=2?this.error="Email must be at least 3 characters long":/.+@.+\..+/.test(this.email)?this.password.length<=2?this.error="Password must be at least 3 characters long":void l.a.post("http://localhost:1337/user/createNew",g.a.stringify({nickname:this.nickname,email:this.email,password:this.password}),{"Content-Type":"application/x-www-form-urlencoded"}).then((function(){return e.$router.push({name:"login"})})).catch((function(e){console.log(e)})):this.error="Email is incorrect"},goToLogin:function(e){return e.preventDefault,this.$router.push({name:"login"})}}},Q=X;function U(e){var t=n("15a8");t.__inject__&&t.__inject__(e)}var W=Object(y["a"])(Q,q,V,!1,U,"2c7c1e50","6e953725"),G=W.exports;function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=new a["a"]({mode:"history",base:".",routes:[{name:"home",path:"/",component:N,meta:{middleware:o}},{name:"login",path:"/login",component:Z},{name:"register",path:"/register",component:G}]});function te(e,t,n){var r=t[n];return r?function(){e.next.apply(e,arguments);var a=te(e,t,n+1);r($({},e,{next:a}))}:e.next}ee.beforeEach((function(e,t,n){if(e.meta.middleware){var r=Array.isArray(e.meta.middleware)?e.meta.middleware:[e.meta.middleware],a={from:t,next:n,router:ee,to:e},i=te(a,r,1);return r[0]($({},a,{next:i}))}return n()}));var ne=ee,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.token,attrs:{id:"app"}},[e._m(0),n("div",{staticClass:"content"},[n("router-view",{staticClass:"view"})],1),e._m(1)])},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("h1",[e._v("myS3")]),n("hr")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("hr"),n("div",{staticClass:"credits"},[n("p",[e._v("Powered by Vue.js and Express")]),n("p",[e._v("Authors : Pierre Hérissé - Antoine Nivoy")])])])}],ie={name:"app",components:{},data:function(){return{token:localStorage.token}}},oe=ie;function se(e){var t=n("034f");t.__inject__&&t.__inject__(e)}var ce=Object(y["a"])(oe,re,ae,!1,se,null,"01eb4b07"),ue=ce.exports,le=n("9483");function de(){var e=new r["a"]({router:ne,render:function(e){return e(ue)}});return{app:e,router:ne}}Object(le["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,r["a"].use(a["a"]);var fe=de(),pe=fe.app,he=fe.router;he.onReady((function(){pe.$mount("#app")}))},afee:function(e,t,n){},b0d1:function(e,t,n){},d249:function(e,t,n){"use strict";n.r(t);var r=n("5678"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},e7fb:function(e,t,n){e.exports=n.p+"img/folder-icon.1db02bee.png"}});
//# sourceMappingURL=main.604f1886.js.map